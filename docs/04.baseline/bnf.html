<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Grammar - Evaluating Parser Options</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">var path_to_root = "../";</script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li class="affix"><a href="../01.welcome/welcome.html">Welcome</a></li><li><a href="../02.intro/introduction.html"><strong aria-hidden="true">1.</strong> Me</a></li><li><a href="../03.options/choices.html"><strong aria-hidden="true">2.</strong> Choices</a></li><li><a href="../04.baseline/iso_duration.html"><strong aria-hidden="true">3.</strong> Format</a></li><li><a href="../04.baseline/bnf.html" class="active"><strong aria-hidden="true">4.</strong> Grammar</a></li><li><a href="../04.baseline/common_code.html"><strong aria-hidden="true">5.</strong> Common Code</a></li><li><a href="../05.nom/intro.html"><strong aria-hidden="true">6.</strong> Nom</a></li><li><ol class="section"><li><a href="../05.nom/parser.html"><strong aria-hidden="true">6.1.</strong> Parser</a></li></ol></li><li><a href="../06.pest/intro.html"><strong aria-hidden="true">7.</strong> Pest</a></li><li><ol class="section"><li><a href="../06.pest/src.html"><strong aria-hidden="true">7.1.</strong> Parser</a></li></ol></li><li><a href="../07.combine/intro.html"><strong aria-hidden="true">8.</strong> Combine</a></li><li><ol class="section"><li><a href="../07.combine/src.html"><strong aria-hidden="true">8.1.</strong> Parser</a></li></ol></li><li><a href="../08.hand_rolled/intro.html"><strong aria-hidden="true">9.</strong> DIY</a></li><li><ol class="section"><li><a href="../08.hand_rolled/src.html"><strong aria-hidden="true">9.1.</strong> Parser</a></li></ol></li><li><a href="../09.perf/perf.html"><strong aria-hidden="true">10.</strong> Stats</a></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light <span class="default">(default)</span></button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Evaluating Parser Options</h1> 

                        <div class="right-buttons">
                            <a href="../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <style>.presentation-only.not-presenting{display:none}.article-content.presenting{display:none}
</style>
<a class="header" href="#bnf-grammar" id="bnf-grammar"><h1>BNF Grammar</h1></a>
<!--web-only-->
<p>Another thing that will prove useful if you are interested in getting started with parsing
is to understand that there are languages out there for talking about languages. The overall structure
of any format is called a grammar, when explaining the structure of a format it is helpful to have
method to communicate it. One option is to use the Backus-Naur Form (BNF), if you scroll down you will find the ISO 8601 Duration specification written in the BNF.</p>
<p>For those unfamiliar with grammar forms, they consist of a series of rules, the left side of a rule is a name, the right side is a description of what that rule means, they are separated by <code>::=</code> in BNF.</p>
<p>I find it easiest to read a grammar from the bottom up. Using the example below we have the <code>digit</code> rule, on the right side of this rule we see each number from 0 to 9 separated by a <code>|</code>, which here means <em>or</em>, so a digit is a single digit number from 0 through 9. Next we have the <code>integer</code> rule, this is either an <code>integer</code> followed by a <code>digit</code> or &quot;&quot;. This is where things can get a little confusing, To illustrate that something has a possibly, infinite length, grammars typically use this kind of notation.</p>
<p>To me, this style of notation feels backwards, lets use the example <code>999</code>. If you think about it starting with the right most <code>9</code>, you would assign that position <code>&lt;integer&gt;&lt;digit&gt;</code>, the <code>&lt;integer&gt;</code> here would point to the middle <code>9</code>, this would also be assigned <code>&lt;integer&gt;&lt;digit&gt;</code> and again the first <code>&lt;integer&gt;</code> would represent the left most <code>9</code>, this would also be assigned <code>&lt;integer&gt;&lt;digit&gt;</code>, but the first <code>&lt;integer&gt;</code> in this case would be assigned <code>&quot;&quot;</code>. Here is a little flow chart to hopefully help visualize what I am trying to say.</p>
<pre><code class="language-xml">&lt;integer&gt; = &quot;&quot;
    ┗━━━━━━┓
&lt;integer&gt; = &lt;integer&gt;9
    ┗━━━━━━┓
&lt;integer&gt; = &lt;integer&gt;9
    ┗━━━━━━┓
&lt;integer&gt; = &lt;integer&gt;9
</code></pre>
<p>When the right side of a rule looks like this it is referred to as a &quot;recursive&quot; rule. Moving up the grammar, next we have the <code>remainder</code> rule, this is either a <code>.</code> followed by an <code>integer</code> or nothing. Next up we have <code>number</code> which either an <code>integer</code> or a <code>remainder</code> or an <code>integer</code> followed by a <code>remainder</code>.</p>
<p>The next few rules are our units, you will notice that there are two rules for each unit this is because need to have two versions, one non-optional and one optional. Each of the rules is a <code>number</code> followed by the specific unit's character, the optional version is just the normal version or nothing.</p>
<p>After our units we have the two halves of our duration, the <code>time-length</code> and the <code>date-length</code>, notice that we again have the optional version of each. These rules are almost identical in structure, the only difference is the units that are included. Using the <code>date-length</code> as an example, we have 4 options in each option one of the units is not optional. so a date-length is one of the following</p>
<ul>
<li>first
<ul>
<li>optional year</li>
<li>optional month</li>
<li>optional week</li>
<li>day</li>
</ul>
</li>
<li>second
<ul>
<li>optional year</li>
<li>optional month</li>
<li>week</li>
<li>optional day</li>
</ul>
</li>
<li>third
<ul>
<li>optional year</li>
<li>month</li>
<li>optional week</li>
<li>optional day</li>
</ul>
</li>
<li>fourth
<ul>
<li>year</li>
<li>optional month</li>
<li>optional week</li>
<li>optional day
This is because one unit is always required for a date-length. The same applies to the <code>time-length</code> rule, the only difference is that the <code>time-length</code> starts with a <code>T</code>.</li>
</ul>
</li>
</ul>
<p>Finally we have the <code>duration</code> rule, this is the letter <code>P</code> followed by either an optional <code>date-length</code> and a <code>time-length</code> or a <code>date-length</code> followed by an optional <code>time-length</code>, again both items are optional but at least one must be included.</p>
<p>With that out of the way, let's dig into each of our options a little more.</p>
<!--web-only-end-->
<pre><code class="language-xml">&lt;duration&gt;              ::= P &lt;date-length-opt&gt;&lt;time-length&gt; |
                            P &lt;date-length&gt;&lt;time-length-opt&gt;
&lt;date-length-opt&gt;       ::= &lt;date-length&gt; | &quot;&quot;
&lt;date-length&gt;           ::= &lt;years-opt&gt;&lt;months-or-minutes-opt&gt;&lt;weeks-opt&gt;&lt;days&gt; |
                            &lt;years-opt&gt;&lt;months-or-minutes-opt&gt;&lt;weeks&gt;&lt;days-opt&gt; |
                            &lt;years-opt&gt;&lt;months-or-minutes&gt;&lt;weeks-opt&gt;&lt;days-opt&gt; |
                            &lt;years&gt;&lt;months-or-minutes-opt&gt;&lt;weeks-opt&gt;&lt;days-opt&gt;
&lt;time-length-opt&gt;       ::= &lt;time-length&gt; | &quot;&quot;
&lt;time-length&gt;           ::= T&lt;hours-opt&gt;&lt;months-or-minutes-opt&gt;&lt;seconds&gt; |
                            T&lt;hours-opt&gt;&lt;months-or-minutes&gt;&lt;seconds-opt&gt; |
                            T&lt;hours&gt;&lt;months-or-minutes-opt&gt;&lt;seconds-opt&gt;
&lt;years-opt&gt;             ::= &lt;years&gt; | &quot;&quot;
&lt;years&gt;                 ::= &lt;number&gt;Y
&lt;months-or-minutes-opt&gt; ::= &lt;months-or-minutes&gt; | &quot;&quot;
&lt;months-or-minutes&gt;     ::= &lt;number&gt;M
&lt;weeks-opt&gt;             ::= &lt;weeks&gt; | &quot;&quot;
&lt;weeks&gt;                 ::= &lt;number&gt;W
&lt;days-opt&gt;              ::= &lt;days&gt; | &quot;&quot;
&lt;days&gt;                  ::= &lt;number&gt;D
&lt;hours-opt&gt;             ::= &lt;hours&gt; | &quot;&quot;
&lt;hours&gt;                 ::= &lt;number&gt;H
&lt;seconds-opt&gt;           ::= &lt;seconds&gt; | &quot;&quot;
&lt;seconds&gt;               ::= &lt;number&gt;S
&lt;number&gt;                ::= &lt;integer&gt; | &lt;remainder&gt; | &lt;integer&gt;&lt;remainder&gt;
&lt;remainder&gt;             ::= .&lt;integer&gt; | &quot;&quot;
&lt;integer&gt;               ::= &lt;integer&gt;&lt;digit&gt; | &quot;&quot;
&lt;digit&gt;               ::= 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9

</code></pre>
<script>var PresentationMode;!function(e){e[e.Slides=0]="Slides",e[e.Web=1]="Web"}(PresentationMode||(PresentationMode={}));var PresentationModeHider=function(){function e(){var t=this;(this.queryKey="presentation_mode",this.webClass="article-content",this.preClass="presentation-only",this.mode=this.getMode(),this.setMode(),this.assignClassesViaComments(),this.mode!==PresentationMode.Slides||""!==location.pathname&&"/"!==location.pathname)||document.querySelector(".sidebar > .chapter").firstChild.firstChild.click();window.addEventListener("keyup",function(e){e.altKey&&("p"!=e.key&&"P"!=e.key&&"KeyP"!=e.code||t.toggle())})}return e.prototype.assignClassesViaComments=function(){for(var e,t=document.createNodeIterator(document.body,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null),n=this.mode===PresentationMode.Web?"not-presenting":"presenting",o=null;e=t.nextNode();)if(8===e.nodeType){var s=e.nodeValue.trim();o="web-only"===s?this.webClass:"slides-only"===s?this.preClass:null}else 1===e.nodeType&&null!==o&&e.classList.add(o,n)},e.prototype.getMode=function(){var t=localStorage.getItem(this.queryKey);if(null===t)return PresentationMode.Web;try{var e=parseInt(t);return 1<e||e<0?(console.error("presentation_mode was out of range",e),PresentationMode.Web):e}catch(e){return console.error("presentation_mode present in localStorage but value is not an integer",t,e),PresentationMode.Web}},e.prototype.setMode=function(){localStorage.setItem(this.queryKey,this.mode.toString())},e.prototype.updatePage=function(){this.updateElements(document.querySelectorAll(".presentation-only")),this.updateElements(document.querySelectorAll(".article-content"))},e.prototype.updateElements=function(e){for(var t=0;t<e.length;t++){var n=e[t];this.mode===PresentationMode.Slides?n.classList.replace("not-presenting","presenting"):n.classList.replace("presenting","not-presenting")}},e.prototype.toggle=function(){switch(this.mode){case PresentationMode.Slides:this.mode=PresentationMode.Web;break;case PresentationMode.Web:this.mode=PresentationMode.Slides}this.setMode(),this.updatePage()},e}(),___presentationModeHider=new PresentationModeHider;</script>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../04.baseline/iso_duration.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../04.baseline/common_code.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../04.baseline/iso_duration.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../04.baseline/common_code.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
